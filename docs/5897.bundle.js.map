{"version":3,"file":"5897.bundle.js","sources":["webpack://graph-diagram/./node_modules/.pnpm/monaco-editor@0.52.2/node_modules/monaco-editor/esm/vs/base/common/numbers.js","webpack://graph-diagram/./node_modules/.pnpm/monaco-editor@0.52.2/node_modules/monaco-editor/esm/vs/editor/common/services/languageFeatureDebounce.js","webpack://graph-diagram/./node_modules/.pnpm/monaco-editor@0.52.2/node_modules/monaco-editor/esm/vs/platform/environment/common/environment.js","webpack://graph-diagram/./node_modules/.pnpm/monaco-editor@0.52.2/node_modules/monaco-editor/esm/vs/platform/instantiation/common/descriptors.js","webpack://graph-diagram/./node_modules/.pnpm/monaco-editor@0.52.2/node_modules/monaco-editor/esm/vs/platform/instantiation/common/extensions.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function clamp(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\nexport class MovingAverage {\n    constructor() {\n        this._n = 1;\n        this._val = 0;\n    }\n    update(value) {\n        this._val = this._val + (value - this._val) / this._n;\n        this._n += 1;\n        return this._val;\n    }\n    get value() {\n        return this._val;\n    }\n}\nexport class SlidingWindowAverage {\n    constructor(size) {\n        this._n = 0;\n        this._val = 0;\n        this._values = [];\n        this._index = 0;\n        this._sum = 0;\n        this._values = new Array(size);\n        this._values.fill(0, 0, size);\n    }\n    update(value) {\n        const oldValue = this._values[this._index];\n        this._values[this._index] = value;\n        this._index = (this._index + 1) % this._values.length;\n        this._sum -= oldValue;\n        this._sum += value;\n        if (this._n < this._values.length) {\n            this._n += 1;\n        }\n        this._val = this._sum / this._n;\n        return this._val;\n    }\n    get value() {\n        return this._val;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { doHash } from '../../../base/common/hash.js';\nimport { LRUCache } from '../../../base/common/map.js';\nimport { clamp, MovingAverage, SlidingWindowAverage } from '../../../base/common/numbers.js';\nimport { IEnvironmentService } from '../../../platform/environment/common/environment.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { matchesScheme } from '../../../base/common/network.js';\nexport const ILanguageFeatureDebounceService = createDecorator('ILanguageFeatureDebounceService');\nvar IdentityHash;\n(function (IdentityHash) {\n    const _hashes = new WeakMap();\n    let pool = 0;\n    function of(obj) {\n        let value = _hashes.get(obj);\n        if (value === undefined) {\n            value = ++pool;\n            _hashes.set(obj, value);\n        }\n        return value;\n    }\n    IdentityHash.of = of;\n})(IdentityHash || (IdentityHash = {}));\nclass NullDebounceInformation {\n    constructor(_default) {\n        this._default = _default;\n    }\n    get(_model) {\n        return this._default;\n    }\n    update(_model, _value) {\n        return this._default;\n    }\n    default() {\n        return this._default;\n    }\n}\nclass FeatureDebounceInformation {\n    constructor(_logService, _name, _registry, _default, _min, _max) {\n        this._logService = _logService;\n        this._name = _name;\n        this._registry = _registry;\n        this._default = _default;\n        this._min = _min;\n        this._max = _max;\n        this._cache = new LRUCache(50, 0.7);\n    }\n    _key(model) {\n        return model.id + this._registry.all(model).reduce((hashVal, obj) => doHash(IdentityHash.of(obj), hashVal), 0);\n    }\n    get(model) {\n        const key = this._key(model);\n        const avg = this._cache.get(key);\n        return avg\n            ? clamp(avg.value, this._min, this._max)\n            : this.default();\n    }\n    update(model, value) {\n        const key = this._key(model);\n        let avg = this._cache.get(key);\n        if (!avg) {\n            avg = new SlidingWindowAverage(6);\n            this._cache.set(key, avg);\n        }\n        const newValue = clamp(avg.update(value), this._min, this._max);\n        if (!matchesScheme(model.uri, 'output')) {\n            this._logService.trace(`[DEBOUNCE: ${this._name}] for ${model.uri.toString()} is ${newValue}ms`);\n        }\n        return newValue;\n    }\n    _overall() {\n        const result = new MovingAverage();\n        for (const [, avg] of this._cache) {\n            result.update(avg.value);\n        }\n        return result.value;\n    }\n    default() {\n        const value = (this._overall() | 0) || this._default;\n        return clamp(value, this._min, this._max);\n    }\n}\nlet LanguageFeatureDebounceService = class LanguageFeatureDebounceService {\n    constructor(_logService, envService) {\n        this._logService = _logService;\n        this._data = new Map();\n        this._isDev = envService.isExtensionDevelopment || !envService.isBuilt;\n    }\n    for(feature, name, config) {\n        const min = config?.min ?? 50;\n        const max = config?.max ?? min ** 2;\n        const extra = config?.key ?? undefined;\n        const key = `${IdentityHash.of(feature)},${min}${extra ? ',' + extra : ''}`;\n        let info = this._data.get(key);\n        if (!info) {\n            if (this._isDev) {\n                this._logService.debug(`[DEBOUNCE: ${name}] is disabled in developed mode`);\n                info = new NullDebounceInformation(min * 1.5);\n            }\n            else {\n                info = new FeatureDebounceInformation(this._logService, name, feature, (this._overallAverage() | 0) || (min * 1.5), // default is overall default or derived from min-value\n                min, max);\n            }\n            this._data.set(key, info);\n        }\n        return info;\n    }\n    _overallAverage() {\n        // Average of all language features. Not a great value but an approximation\n        const result = new MovingAverage();\n        for (const info of this._data.values()) {\n            result.update(info.default());\n        }\n        return result.value;\n    }\n};\nLanguageFeatureDebounceService = __decorate([\n    __param(0, ILogService),\n    __param(1, IEnvironmentService)\n], LanguageFeatureDebounceService);\nexport { LanguageFeatureDebounceService };\nregisterSingleton(ILanguageFeatureDebounceService, LanguageFeatureDebounceService, 1 /* InstantiationType.Delayed */);\n","import { createDecorator } from '../../instantiation/common/instantiation.js';\nexport const IEnvironmentService = createDecorator('environmentService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class SyncDescriptor {\n    constructor(ctor, staticArguments = [], supportsDelayedInstantiation = false) {\n        this.ctor = ctor;\n        this.staticArguments = staticArguments;\n        this.supportsDelayedInstantiation = supportsDelayedInstantiation;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { SyncDescriptor } from './descriptors.js';\nconst _registry = [];\nexport function registerSingleton(id, ctorOrDescriptor, supportsDelayedInstantiation) {\n    if (!(ctorOrDescriptor instanceof SyncDescriptor)) {\n        ctorOrDescriptor = new SyncDescriptor(ctorOrDescriptor, [], Boolean(supportsDelayedInstantiation));\n    }\n    _registry.push([id, ctorOrDescriptor]);\n}\nexport function getSingletonServiceDescriptors() {\n    return _registry;\n}\n"],"names":["Math","Array","WeakMap","n","e","Map","arguments","r","Object","Reflect"],"mappings":"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"}