"use strict";(self.webpackChunkgraph_diagram=self.webpackChunkgraph_diagram||[]).push([["2394"],{27687:function(e,r,t){function n(e,r){let t=[],n=[];for(let n of e)r.has(n)||t.push(n);for(let t of r)e.has(t)||n.push(t);return{removed:t,added:n}}function i(e,r){let t=new Set;for(let n of r)e.has(n)&&t.add(n);return t}t.d(r,{j:()=>i,q:()=>n})},26725:function(e,r,t){t.d(r,{Z:()=>s});var n,i,o=t(29632);(n=i||(i={}))[n.Ignore=0]="Ignore",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error",function(e){let r="error",t="warning",n="info";e.fromValue=function(i){return i?o.qq(r,i)?e.Error:o.qq(t,i)||o.qq("warn",i)?e.Warning:o.qq(n,i)?e.Info:e.Ignore:e.Ignore},e.toString=function(i){switch(i){case e.Error:return r;case e.Warning:return t;case e.Info:return n;default:return"ignore"}}}(i||(i={}));let s=i},15761:function(e,r,t){t.r(r),t.d(r,{MarkerDecorationsService:()=>p});var n=t(84159),i=t(81055),o=t(63480),s=t(50683),a=t(33040),u=t(42361),c=t(78390),l=t(15173),h=t(93130),d=t(35202),g=t(79941),m=t(27687),f=function(e,r){return function(t,n){r(t,n,e)}};let p=class extends i.JT{constructor(e,r){super(),this._markerService=r,this._onDidChangeMarker=this._register(new h.Q5),this._markerDecorations=new g.Y9,e.getModels().forEach(e=>this._onModelAdded(e)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,r){let t=this._markerDecorations.get(e);return t&&t.getMarker(r)||null}_handleMarkerChange(e){e.forEach(e=>{let r=this._markerDecorations.get(e);r&&this._updateDecorations(r)})}_onModelAdded(e){let r=new _(e);this._markerDecorations.set(e.uri,r),this._updateDecorations(r)}_onModelRemoved(e){let r=this._markerDecorations.get(e.uri);r&&(r.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===l.lg.inMemory||e.uri.scheme===l.lg.internal||e.uri.scheme===l.lg.vscode)&&this._markerService?.read({resource:e.uri}).map(e=>e.owner).forEach(r=>this._markerService.remove(r,[e.uri]))}_updateDecorations(e){let r=this._markerService.read({resource:e.model.uri,take:500});e.update(r)&&this._onDidChangeMarker.fire(e.model)}};p=function(e,r,t,n){var i,o=arguments.length,s=o<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,t,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(r,t,s):i(r,t))||s);return o>3&&s&&Object.defineProperty(r,t,s),s}([f(0,u.IModelService),f(1,n.lT)],p);class _ extends i.JT{constructor(e){super(),this.model=e,this._map=new g.YQ,this._register((0,i.OF)(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){let{added:r,removed:t}=(0,m.q)(new Set(this._map.keys()),new Set(e));if(0===r.length&&0===t.length)return!1;let n=t.map(e=>this._map.get(e)),i=r.map(e=>({range:this._createDecorationRange(this.model,e),options:this._createDecorationOption(e)})),o=this.model.deltaDecorations(n,i);for(let e of t)this._map.delete(e);for(let e=0;e<o.length;e++)this._map.set(r[e],o[e]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,r){let t=c.e.lift(r);if(r.severity!==n.ZL.Hint||this._hasMarkerTag(r,1)||this._hasMarkerTag(r,2)||(t=t.setEndPosition(t.startLineNumber,t.startColumn+2)),(t=e.validateRange(t)).isEmpty()){let r=e.getLineLastNonWhitespaceColumn(t.startLineNumber)||e.getLineMaxColumn(t.startLineNumber);if(1===r||t.endColumn>=r)return t;let n=e.getWordAtPosition(t.getStartPosition());n&&(t=new c.e(t.startLineNumber,n.startColumn,t.endLineNumber,n.endColumn))}else if(r.endColumn===Number.MAX_VALUE&&1===r.startColumn&&t.startLineNumber===t.endLineNumber){let n=e.getLineFirstNonWhitespaceColumn(r.startLineNumber);n<t.endColumn&&(t=new c.e(t.startLineNumber,n,t.endLineNumber,t.endColumn),r.startColumn=n)}return t}_createDecorationOption(e){let r,t,i,u,c;switch(e.severity){case n.ZL.Hint:r=this._hasMarkerTag(e,2)?void 0:this._hasMarkerTag(e,1)?"squiggly-unnecessary":"squiggly-hint",t=0;break;case n.ZL.Info:r="squiggly-info",u=(0,s.EN)(a.eS),t=10,i={color:(0,s.EN)(d.Gvr),position:1};break;case n.ZL.Warning:r="squiggly-warning",u=(0,s.EN)(a.Re),t=20,i={color:(0,s.EN)(d.Ivo),position:1};break;case n.ZL.Error:default:r="squiggly-error",u=(0,s.EN)(a.lK),t=30,i={color:(0,s.EN)(d.Gj_),position:1}}return e.tags&&(-1!==e.tags.indexOf(1)&&(c="squiggly-inline-unnecessary"),-1!==e.tags.indexOf(2)&&(c="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:r,showIfCollapsed:!0,overviewRuler:{color:u,position:o.sh.Right},minimap:i,zIndex:t,inlineClassName:c}}_hasMarkerTag(e,r){return!!e.tags&&e.tags.indexOf(r)>=0}}},42361:function(e,r,t){t.r(r),t.d(r,{IModelService:()=>n});let n=(0,t(21721).yh)("modelService")},21721:function(e,r,t){var n,i;t.d(r,{I8:()=>n,TG:()=>o,yh:()=>s}),(i=n||(n={})).serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies",i.getServiceDependencies=function(e){return e[i.DI_DEPENDENCIES]||[]};let o=s("instantiationService");function s(e){if(n.serviceIds.has(e))return n.serviceIds.get(e);let r=function(e,t,i){if(3!=arguments.length)throw Error("@IServiceName-decorator can only be used to decorate a parameter");e[n.DI_TARGET]===e?e[n.DI_DEPENDENCIES].push({id:r,index:i}):(e[n.DI_DEPENDENCIES]=[{id:r,index:i}],e[n.DI_TARGET]=e)};return r.toString=()=>e,n.serviceIds.set(e,r),r}},45038:function(e,r,t){t.d(r,{I:()=>o});var n=t(93130),i=t(84311);let o={JSONContribution:"base.contributions.json"},s=new class{constructor(){this._onDidChangeSchema=new n.Q5,this.schemasById={}}registerSchema(e,r){this.schemasById[e.length>0&&"#"===e.charAt(e.length-1)?e.substring(0,e.length-1):e]=r,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}};i.B.add(o.JSONContribution,s)},84159:function(e,r,t){t.d(r,{H0:()=>o,ZL:()=>i,lT:()=>g});var n,i,o,s=t(26725),a=t(99381),u=t(21721);(n=i||(i={}))[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error";var c=i||(i={});c.compare=function(e,r){return r-e};let l=Object.create(null);l[c.Error]=(0,a.NC)("sev.error","Error"),l[c.Warning]=(0,a.NC)("sev.warning","Warning"),l[c.Info]=(0,a.NC)("sev.info","Info"),c.toString=function(e){return l[e]||""},c.fromSeverity=function(e){switch(e){case s.Z.Error:return c.Error;case s.Z.Warning:return c.Warning;case s.Z.Info:return c.Info;case s.Z.Ignore:return c.Hint}},c.toSeverity=function(e){switch(e){case c.Error:return s.Z.Error;case c.Warning:return s.Z.Warning;case c.Info:return s.Z.Info;case c.Hint:return s.Z.Ignore}};var h=o||(o={});function d(e,r){let t=[""];return e.source?t.push(e.source.replace("\xa6","\\\xa6")):t.push(""),e.code?"string"==typeof e.code?t.push(e.code.replace("\xa6","\\\xa6")):t.push(e.code.value.replace("\xa6","\\\xa6")):t.push(""),void 0!==e.severity&&null!==e.severity?t.push(i.toString(e.severity)):t.push(""),e.message&&r?t.push(e.message.replace("\xa6","\\\xa6")):t.push(""),void 0!==e.startLineNumber&&null!==e.startLineNumber?t.push(e.startLineNumber.toString()):t.push(""),void 0!==e.startColumn&&null!==e.startColumn?t.push(e.startColumn.toString()):t.push(""),void 0!==e.endLineNumber&&null!==e.endLineNumber?t.push(e.endLineNumber.toString()):t.push(""),void 0!==e.endColumn&&null!==e.endColumn?t.push(e.endColumn.toString()):t.push(""),t.push(""),t.join("\xa6")}h.makeKey=function(e){return d(e,!0)},h.makeKeyOptionalMessage=d;let g=(0,u.yh)("markerService")},84311:function(e,r,t){t.d(r,{B:()=>o});var n=t(26038),i=t(78200);let o=new class{constructor(){this.data=new Map}add(e,r){n.ok(i.HD(e)),n.ok(i.Kn(r)),n.ok(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,r)}as(e){return this.data.get(e)||null}}}}]);
//# sourceMappingURL=2394.bundle.js.map